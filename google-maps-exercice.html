<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Temps de trajet en train</title>

<style>
:root{
  --primary:#004c97;
  --light:#eef3f9;
  --card:#ffffff;
  --accent:#eaf1ff;
  --ok:#2e8b57;
  --error:#b00020;
}

body{
  font-family: Arial, sans-serif;
  background:var(--light);
  padding:20px;
}

.container{
  max-width:900px;
  margin:auto;
  background:var(--card);
  padding:34px;
  border-radius:28px;
  box-shadow:0 10px 34px rgba(0,0,0,0.12);
}

h1{
  text-align:center;
  color:var(--primary);
}
.subtitle{
  text-align:center;
  color:#666;
  margin-bottom:24px;
}

/* PROGRESSION */
.progress-bg{
  background:#dbe6ff;
  height:16px;
  border-radius:20px;
}
.progress-bar{
  height:16px;
  border-radius:20px;
  background:linear-gradient(90deg,#004c97,#2a77d4);
  transition:width .4s;
}
.progress-text{
  text-align:center;
  margin:8px 0 24px;
  font-weight:bold;
}

/* BLOCS */
.card{
  background:var(--accent);
  padding:22px;
  border-radius:22px;
  margin-bottom:26px;
}
.card h2{color:var(--primary);}

/* CONSIGNES */
.steps{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:16px;
}
.step{
  background:white;
  padding:14px;
  border-radius:14px;
  display:flex;
  gap:10px;
}
.step span{
  background:var(--primary);
  color:white;
  width:30px;
  height:30px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:bold;
}

/* MAPS */
.maps-btn{
  display:block;
  margin:20px 0;
  padding:18px;
  background:linear-gradient(135deg,#004c97,#0066cc);
  color:white;
  text-align:center;
  border-radius:22px;
  font-size:18px;
  text-decoration:none;
}

/* AFFICHAGE */
.display{
  width:100%;
  font-size:40px;
  text-align:center;
  padding:18px;
  border-radius:20px;
  border:3px solid var(--primary);
  background:#f9fbff;
  font-weight:bold;
}

/* CLAVIER */
.keypad{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:16px;
  margin-top:22px;
}
.keypad button{
  padding:24px 0;
  font-size:26px;
  border:none;
  border-radius:20px;
  background:#ffffff;
  box-shadow:inset 0 -3px 0 rgba(0,0,0,0.15),0 4px 8px rgba(0,0,0,0.15);
  font-weight:bold;
}
.keypad button.ok{background:var(--primary);color:white;}
.keypad button.del{background:#f6d6d6;}
.keypad button:active{transform:translateY(2px);}

/* MESSAGE */
.message{
  text-align:center;
  margin-top:16px;
  font-weight:bold;
  display:none;
}
.message.ok{ color:var(--ok); }
.message.error{ color:var(--error); }

/* RESET */
.reset-btn{
  position:fixed;
  bottom:12px;
  right:12px;
  width:34px;
  height:34px;
  border-radius:50%;
  border:none;
  background:#dfe6f2;
  opacity:.25;
}
.reset-btn::before{content:"‚ôªÔ∏è";}
.reset-btn:hover{opacity:.85;}
</style>
</head>

<body>

<div class="container">

<h1>üöÜ Temps de trajet en train</h1>
<div class="subtitle">Situation professionnelle ‚Äì Google Maps</div>

<div class="progress-bg">
  <div class="progress-bar" id="progressBar"></div>
</div>
<div class="progress-text" id="progressText"></div>

<div class="card">
<h2>üìç Consigne</h2>
<div class="steps">
  <div class="step"><span>1</span>Ouvrir Google Maps</div>
  <div class="step"><span>2</span>D√©part : <b>Gare de Vevey</b></div>
  <div class="step"><span>3</span>üèÅ Destination : <b id="destinationText"></b></div>
  <div class="step"><span>4</span>Train üöÜ</div>
</div>
</div>

<a class="maps-btn" href="https://www.google.com/maps" target="_blank">
üìç Ouvrir Google Maps
</a>

<div class="card">
<h2>‚è±Ô∏è Temps de trajet (minutes)</h2>
<input id="display" class="display" disabled value="0">

<div class="keypad">
  <button onclick="addDigit(1)">1</button>
  <button onclick="addDigit(2)">2</button>
  <button onclick="addDigit(3)">3</button>
  <button onclick="addDigit(4)">4</button>
  <button onclick="addDigit(5)">5</button>
  <button onclick="addDigit(6)">6</button>
  <button onclick="addDigit(7)">7</button>
  <button onclick="addDigit(8)">8</button>
  <button onclick="addDigit(9)">9</button>
  <button class="del" onclick="delDigit()">‚å´</button>
  <button onclick="addDigit(0)">0</button>
  <button class="ok" onclick="valider()">OK</button>
</div>

<div id="msgOk" class="message ok">‚úîÔ∏è Correct. Continue.</div>
<div id="msgErr" class="message error">‚õî Temps incorrect. Recommence.</div>
</div>

</div>

<button class="reset-btn" onclick="resetAll()"></button>

<script>
const exercices = [
  {g:"Gare de Lausanne",min:12,max:30},
  {g:"Gare de Montreux",min:8,max:20},
  {g:"Gare de La Tour-de-Peilz",min:3,max:10},
  {g:"Gare de Clarens",min:4,max:12},
  {g:"Gare de Villeneuve",min:8,max:20},
  {g:"Gare de Renens",min:18,max:40},
  {g:"Gare de Morges",min:15,max:35},
  {g:"Gare de Rolle",min:25,max:50},
  {g:"Gare de Allaman",min:20,max:45},
  {g:"Gare de Nyon",min:35,max:70},

  {g:"Gare de Bussigny",min:20,max:40},
  {g:"Gare de Cossonay",min:35,max:60},
  {g:"Gare de Pal√©zieux",min:25,max:50},
  {g:"Gare de Puidoux",min:10,max:25},
  {g:"Gare de Cully",min:6,max:15},
  {g:"Gare de Lutry",min:10,max:25},
  {g:"Gare de Prilly-Malley",min:15,max:35},
  {g:"Gare de Lausanne-Flon",min:15,max:35},
  {g:"Gare d‚ÄôAigle",min:25,max:50},
  {g:"Gare de St-Maurice",min:40,max:70},

  {g:"Gare de Bex",min:35,max:65},
  {g:"Gare de Roche VD",min:30,max:60},
  {g:"Gare de Payerne",min:70,max:110},
  {g:"Gare d‚ÄôYverdon-les-Bains",min:60,max:90},
  {g:"Gare de Grandson",min:65,max:100},
  {g:"Gare d‚ÄôEstavayer-le-Lac",min:80,max:120},
  {g:"Gare de Fribourg",min:90,max:130},
  {g:"Gare de Sion",min:120,max:180},
  {g:"Gare de Martigny",min:110,max:170},
  {g:"Gare de Gen√®ve",min:70,max:120}
];

let i = parseInt(localStorage.getItem("step")) || 0;
let val = "";
const display = document.getElementById("display");

function init(){
  const ex = exercices[i];
  document.getElementById("destinationText").innerText = ex.g;
  document.getElementById("progressText").innerText = `Exercice ${i+1} / ${exercices.length}`;
  document.getElementById("progressBar").style.width = ((i+1)/exercices.length*100)+"%";
  resetInput();
}

function resetInput(){
  val="";
  display.value="0";
  document.getElementById("msgOk").style.display="none";
  document.getElementById("msgErr").style.display="none";
}

init();

function addDigit(d){
  if(val.length<3){
    val+=d;
    display.value=val;
  }
}
function delDigit(){
  val=val.slice(0,-1);
  display.value=val||"0";
}

function valider(){
  const m=parseInt(val);
  const ex=exercices[i];

  if(isNaN(m)||m<ex.min||m>ex.max){
    resetInput();
    document.getElementById("msgErr").style.display="block";
    return;
  }

  document.getElementById("msgOk").style.display="block";

  setTimeout(()=>{
    i++;a
    localStorage.setItem("step",i);
    if(i<exercices.length){
      init();
    }else{
      document.querySelector(".container").innerHTML =
        "<h1>‚úÖ Exercice termin√©</h1><p style='text-align:center'>Comp√©tence valid√©e.</p>";
    }
  },600);
}

function resetAll(){
  if(confirm("R√©initialiser tous les exercices ?")){
    localStorage.clear();
    location.reload();
  }
}
</script>

</body>
</html>
